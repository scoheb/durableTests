node() {

    // You need to have the provider 'Red Hat UMB Stage' defined
    // in your global config
    //
    def sendResult = sendCIMessage providerName: 'Red Hat UMB Stage', \
    overrides: [topic: 'VirtualTopic.eng.ci.example.durable.test'], \
                    messageType: 'Custom', \
                    messageProperties: """ 
    action=${env.BUILD_NUMBER}
                    """, \
                    messageContent: """
                      {
    
    "action": "${env.BUILD_NUMBER}"
  }
                    """
  // echo sent message id and content
  echo sendResult.getMessageId()
  echo sendResult.getMessageContent()

}

